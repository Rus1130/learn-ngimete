<style>
    textarea {
        resize: none;
    }

    textarea:focus {
        outline: none;
    }

    #out {
        margin-bottom: 4px;
    }
</style>

<head>
    <meta charset="UTF-8">
</head>

<body>
    <textarea id="input" style="width: 100%; height: 80px; font-family: monospace;"></textarea>

    <div id="out" style="font-family: monospace; margin-top: 10px;"></div>

    <button id="both" style="padding: 10px;">copy both</button>
    <button id="ortho" style="padding: 10px;">copy ortho</button>
    <button id="ipa" style="padding: 10px;">copy IPA</button>
</body>
<script type="module">
import { Writer } from './lib.js';

const input = document.getElementById("input");
const output = document.getElementById("out");

const bothButton = document.getElementById("both");
const orthoButton = document.getElementById("ortho");
const ipaButton = document.getElementById("ipa");

function updateOutput() {
    const value = input.value;
    output.innerText = value ? new Writer(value).both() : "";
}

input.addEventListener("input", updateOutput);

bothButton.addEventListener("click", () => {
    const value = input.value;
    if (!value) return;

    navigator.clipboard.writeText(new Writer(value).both());
    bothButton.innerText = "copied!";
    setTimeout(() => bothButton.innerText = "copy both", 2000);
});

orthoButton.addEventListener("click", () => {
    const value = input.value;
    if (!value) return;

    navigator.clipboard.writeText(new Writer(value).ortho());
    orthoButton.innerText = "copied!";
    setTimeout(() => orthoButton.innerText = "copy ortho", 2000);
});

ipaButton.addEventListener("click", () => {
    const value = input.value;
    if (!value) return;

    navigator.clipboard.writeText(new Writer(value).ipa());
    ipaButton.innerText = "copied!";
    setTimeout(() => ipaButton.innerText = "copy IPA", 2000);
});
</script>
